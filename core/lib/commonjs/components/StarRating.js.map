{"version":3,"sources":["StarRating.tsx"],"names":["StarRating","Icon","starSize","maxStars","rating","defaultValue","isEditable","activeColor","inactiveColor","style","onPress","rest","localRating","setLocalRating","React","useState","useEffect","ratingHandler","useCallback","r","ratingRounded","Math","round","styles","container","Array","map","_","i","display","touchContainer","pressable","StyleSheet","create","flexDirection","alignItems","position","top","right","left","bottom","zIndex","flex","height","width"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport {\n  View,\n  StyleSheet,\n  StyleProp,\n  ViewStyle,\n  Pressable,\n} from \"react-native\";\nimport { withTheme } from \"../theming\";\nimport type { Theme } from \"../styles/DefaultTheme\";\nimport type { IconSlot } from \"../interfaces/Icon\";\n\ntype Props = {\n  starSize?: number;\n  maxStars?: number;\n  rating?: number;\n  defaultValue?: number;\n  isEditable?: boolean;\n  activeColor?: string;\n  inactiveColor?: string;\n  theme: Theme;\n  style?: StyleProp<ViewStyle>;\n  onPress?: (newValue: number) => void;\n} & IconSlot;\n\nconst StarRating: React.FC<Props> = ({\n  Icon,\n  starSize = 16,\n  maxStars = 5,\n  rating = 0,\n  defaultValue,\n  isEditable = false,\n  activeColor,\n  inactiveColor,\n  style,\n  onPress,\n  ...rest\n}) => {\n  const [localRating, setLocalRating] = React.useState<number>(\n    rating || defaultValue || 0\n  );\n\n  React.useEffect(() => {\n    if (rating != null) {\n      setLocalRating(rating);\n    }\n  }, [rating]);\n\n  React.useEffect(() => {\n    if (defaultValue != null) {\n      setLocalRating(defaultValue);\n    }\n  }, [defaultValue]);\n\n  const ratingHandler = React.useCallback(\n    (r) => {\n      setLocalRating(r);\n      !!onPress && onPress(r);\n    },\n    [onPress]\n  );\n\n  const ratingRounded = Math.round(localRating * 2) / 2;\n\n  return (\n    <View style={[styles.container, style]} {...rest}>\n      {[...Array(maxStars)].map((_, i) => (\n        <View key={i} style={{ display: \"flex\" }}>\n          <Icon\n            name={\n              ratingRounded - i === 0.5\n                ? \"MaterialIcons/star-half\"\n                : \"MaterialIcons/star\"\n            }\n            size={starSize}\n            color={ratingRounded > i ? activeColor : inactiveColor}\n          />\n          {isEditable && (\n            <View style={styles.touchContainer}>\n              <Pressable\n                style={styles.pressable}\n                onPress={() => ratingHandler(i + 0.5)}\n              />\n              <Pressable\n                style={styles.pressable}\n                onPress={() => ratingHandler(i + 1)}\n              />\n            </View>\n          )}\n        </View>\n      ))}\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n  },\n  touchContainer: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    position: \"absolute\",\n    top: 0,\n    right: 0,\n    left: 0,\n    bottom: 0,\n    zIndex: 1,\n  },\n  pressable: {\n    flex: 1,\n    height: \"100%\",\n    width: \"50%\",\n  },\n});\n\nexport default withTheme(StarRating);\n"]}