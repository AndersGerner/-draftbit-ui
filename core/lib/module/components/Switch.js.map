{"version":3,"sources":["Switch.tsx"],"names":["React","Switch","NativeSwitch","withTheme","FormRow","RowDirection","usePrevious","value","defaultValue","disabled","onValueChange","activeTrackColor","inactiveTrackColor","activeThumbColor","inactiveThumbColor","theme","style","rest","activeTrackThemeColor","colors","primary","inactiveTrackThemeColor","activeThumbThemeColor","inactiveThumbThemeColor","checked","setChecked","useState","useEffect","previousDefaultValue","Boolean","false","true","bool","Row","label","direction","SwitchRow"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport {\n  Switch as NativeSwitch,\n  SwitchProps,\n  StyleProp,\n  ViewStyle,\n} from \"react-native\";\nimport { withTheme } from \"../theming\";\nimport FormRow from \"./FormRow\";\nimport { RowDirection } from \"@draftbit/types\";\nimport type { Theme } from \"../styles/DefaultTheme\";\nimport { usePrevious } from \"../hooks\";\n\ntype Props = {\n  value?: boolean;\n  disabled?: boolean;\n  onValueChange?: (value: boolean) => void;\n  defaultValue?: boolean;\n  theme: Theme;\n  activeTrackColor: string;\n  inactiveTrackColor: string;\n  activeThumbColor: string;\n  inactiveThumbColor: string;\n} & SwitchProps;\n\nfunction Switch({\n  value,\n  defaultValue,\n  disabled,\n  onValueChange,\n  activeTrackColor,\n  inactiveTrackColor,\n  activeThumbColor,\n  inactiveThumbColor,\n  theme,\n  style,\n  ...rest\n}: Props) {\n  const activeTrackThemeColor = activeTrackColor || theme.colors.primary;\n  const inactiveTrackThemeColor = inactiveTrackColor || \"#EEE\";\n\n  const activeThumbThemeColor = activeThumbColor || \"#FFF\";\n  const inactiveThumbThemeColor = inactiveThumbColor || \"#FFF\";\n\n  const [checked, setChecked] = React.useState(value || defaultValue);\n\n  React.useEffect(() => {\n    if (value != null && value !== checked) {\n      setChecked(value);\n    }\n  }, [value, checked]);\n\n  // This special logic is to handle weird APIs like Airtable that return\n  // true or undefined for a boolean\n  const previousDefaultValue = usePrevious(defaultValue) as boolean | undefined;\n  React.useEffect(() => {\n    if (defaultValue !== previousDefaultValue) {\n      setChecked(Boolean(defaultValue));\n    }\n  }, [defaultValue, previousDefaultValue]);\n\n  return (\n    <NativeSwitch\n      value={checked}\n      disabled={disabled}\n      trackColor={{\n        false: inactiveTrackThemeColor,\n        true: activeTrackThemeColor,\n      }}\n      thumbColor={value ? activeThumbThemeColor : inactiveThumbThemeColor}\n      // @ts-ignore react-native-web only\n      activeThumbColor={activeThumbThemeColor}\n      ios_backgroundColor={inactiveTrackThemeColor}\n      style={style}\n      onValueChange={(bool) => {\n        setChecked(bool);\n        onValueChange && onValueChange(bool);\n      }}\n      {...rest}\n    />\n  );\n}\n\ntype RowProps = {\n  label: string;\n  direction: RowDirection;\n  style?: StyleProp<ViewStyle>;\n};\n\nfunction Row({\n  label = \"Label\",\n  direction = RowDirection.Row,\n  style,\n  value,\n  defaultValue,\n  disabled,\n  onValueChange,\n  activeTrackColor,\n  inactiveTrackColor,\n  activeThumbColor,\n  inactiveThumbColor,\n  theme,\n  ...rest\n}: Props & RowProps) {\n  const [checked, setChecked] = React.useState(\n    value != null ? value : defaultValue\n  );\n\n  React.useEffect(() => {\n    if (value != null) {\n      setChecked(value);\n    }\n  }, [value]);\n\n  React.useEffect(() => {\n    if (defaultValue != null) {\n      setChecked(defaultValue);\n    }\n  }, [defaultValue]);\n\n  return (\n    <FormRow\n      disabled={disabled}\n      onPress={() => {\n        setChecked(!checked);\n        onValueChange && onValueChange(!checked);\n      }}\n      label={label}\n      direction={direction}\n      style={style}\n      {...rest}\n    >\n      <Switch\n        theme={theme}\n        value={checked}\n        disabled={disabled}\n        onValueChange={onValueChange}\n        activeTrackColor={activeTrackColor}\n        inactiveTrackColor={inactiveTrackColor}\n        activeThumbColor={activeThumbColor}\n        inactiveThumbColor={inactiveThumbColor}\n      />\n    </FormRow>\n  );\n}\n\nconst SwitchRow = withTheme(Row);\nexport { SwitchRow };\nexport default withTheme(Switch);\n"]}